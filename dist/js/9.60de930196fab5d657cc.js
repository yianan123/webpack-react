(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{190:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);n(192);var a=n(193),r=n.n(a),s=n(38),i=n.n(s),o=(n(184),n(185)),c=n.n(o),h=n(58),u=n.n(h),l=n(10),f=n.n(l),d=n(11),p=n.n(d),m=n(12),v=n.n(m),w=n(13),g=n.n(w),k=n(14),y=n.n(k),S=n(0),I=n.n(S),b=n(88),E=n(196),R=n.n(E),D=(n(188),n(189)),x=n.n(D),C=n(1),M=n.n(C),U=n(56),T=n.n(U),Y=(n(190),function(t){function e(t){var n;return f()(this,e),(n=v()(this,g()(e).call(this,t))).iframeRef=I.a.createRef(),n.state={},n}return y()(e,t),p()(e,[{key:"componentDidMount",value:function(){console.log(this.iframeRef),c.a.loading("加载中",6,null,!0),this.iframeRef.current.onload=function(){c.a.hide()}}},{key:"render",value:function(){var t=document.getElementById("newsContent"),e=this.props,n=e.url,a=e.show,r=e.clickFun;console.log(n,a);var s=I.a.createElement("div",{className:"iframe-content"},I.a.createElement("iframe",{title:"ff",src:n,ref:this.iframeRef,frameBorder:"0",scrolling:"auto"}),I.a.createElement("div",{className:"header"},I.a.createElement("div",{className:"btn"},I.a.createElement(x.a,{type:"primary",size:"small",onClick:function(){return r()}},"关闭"))));return T.a.createPortal(a?s:null,t)}}]),e}(I.a.Component));Y.propTypes={url:M.a.string.isRequired,show:M.a.bool.isRequired};var F=Y,N=function(t){function e(t){var n;return f()(this,e),(n=v()(this,g()(e).call(this,t))).state={refreshing:!1,down:!0,height:document.documentElement.clientHeight-100,touchStartY:0,data:[],showIframe:!1,showUrl:"",deviceId:"15365673"+parseInt(1e4*Math.random())},n}return y()(e,t),p()(e,[{key:"handlerRefesh",value:function(){var t=u()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({refreshing:!0}),t.next=3,this.getData();case 3:e=t.sent,c.a.info(e.length>0?"已更新".concat(e.length,"条数据"):"无数据",1,null,!1),this.state.down?this.setState({refreshing:!1,data:e.concat(this.state.data)}):this.setState({refreshing:!1,data:this.state.data.concat(e)});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getData",value:function(){var t=u()(i.a.mark(function t(){var e,n,a,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c.a.loading("加载中",3),e="http://is.snssdk.com/api/news/feed/v51/?category=".concat(this.props.category,"&device_id=").concat(this.state.deviceId,"&&tt_from=pull"),t.next=4,R()(e);case 4:return n=t.sent,t.next=7,n.json();case 7:return a=t.sent,r=a.data.map(function(t){return JSON.parse(t.content)}),c.a.hide({showIframe:123}),t.abrupt("return",r);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"handleStart",value:function(t){this.setState({touchStartY:t.targetTouches[0].clientY}),t.stopPropagation()}},{key:"handleMove",value:function(t){var e=t.targetTouches[0].clientY;this.setState({down:e-this.state.touchStartY>=0})}},{key:"componentDidMount",value:function(){var t=u()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this.state.data.length){t.next=5;break}return t.next=3,this.getData();case 3:e=t.sent,this.setState({data:e.concat(this.state.data)});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"showDetailInfo",value:function(t){this.setState({showIframe:!0,showUrl:t})}},{key:"hideDetailInfo",value:function(){this.setState({showIframe:!1,showUrl:""})}},{key:"toHump",value:function(t){var e=t.replace(/_(\w)/g,function(t,e){return e.toUpperCase()});return e.substring(0,1).toUpperCase()+e.substring(1)}},{key:"render",value:function(){var t=this,e=this.toHump(this.props.category),n=b.default[e];return I.a.createElement(I.a.Fragment,null,I.a.createElement(r.a,{onTouchStart:this.handleStart.bind(this),onTouchMove:this.handleMove.bind(this),ref:function(e){return t.ptr=e},damping:80,style:{position:"relative",overflow:"auto",height:this.state.height},direction:this.state.down?"down":"up",refreshing:this.state.refreshing,onRefresh:this.handlerRefesh.bind(this)},I.a.createElement(n,{dataList:this.state.data,show:this.state.down,clickFun:this.showDetailInfo.bind(this)})),this.state.showIframe&&I.a.createElement(F,{clickFun:this.hideDetailInfo.bind(this),show:this.state.showIframe,url:this.state.showUrl}))}}]),e}(I.a.Component);e.default=N}}]);